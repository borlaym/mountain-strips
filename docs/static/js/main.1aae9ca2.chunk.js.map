{"version":3,"sources":["types.ts","SwipeActions.tsx","MountainStrip.tsx","createStripDeck.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["Goods","MAX_DRAG_DISTANCE","MIN_DISTANCE_FOR_ACTION","Container","styled","div","_templateObject","props","swiping","Left","_templateObject2","Right","_templateObject3","SwipeActions","state","x","handlePan","e","dragDistance","deltaX","Math","max","min","_this","setState","handlePanEnd","onRightAction","onLeftAction","react","react_hammerjs_es","onPan","this","onPanEnd","onTap","style","left","children","React","goodToImageSrc","good","Wood","Stone","Ore","DoubleSilver","Silver","Strip","MountainStrip_templateObject","removed","Good","img","MountainStrip_templateObject2","taken","MountainStripComponent","SwipeActions_SwipeActions","onUndoAction","onTakeAction","strip","layout","map","index","key","src","layouts","createStripDeck","array","temporaryValue","randomIndex","currentIndex","length","floor","random","shuffle","App_templateObject","Button","button","App_templateObject2","App","stripDeck","activeStrips","newGame","_stripDeck","Object","toArray","strip1","strip2","rest","slice","take","newTakenNumber","concat","toConsumableArray","undo","nextTurn","newStrip","updatedStrips","window","localStorage","setItem","JSON","stringify","prevState","getItem","parse","err","console","error","_this2","App_Container","join","onClick","Boolean","location","hostname","match","ReactDOM","render","react_default","a","createElement","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.1aae9ca2.chunk.js","sourcesContent":["export enum Goods {\n\tWood,\n\tStone,\n\tOre,\n\tSilver,\n\tDoubleSilver\n}\n\nexport interface MountainStrip {\n\tlayout: Goods[],\n\ttaken: number,\n\tremoved: boolean\n}\n\n","import * as React from 'react';\nimport Hammer from 'react-hammerjs'\nimport styled from 'styled-components';\n\nconst MAX_DRAG_DISTANCE = 100\nconst MIN_DISTANCE_FOR_ACTION = 90\n\ninterface Props {\n\tchildren: React.ReactNode,\n\tonLeftAction: () => void,\n\tonRightAction: () => void\n}\n\ninterface State {\n\tswiping: boolean,\n\tx: number\n}\n\nconst Container = styled.div`\n\tposition: relative;\n\twidth: 100%; \n\t${(props: { swiping: boolean }) => props.swiping ? '' : 'transition: all 0.5s' }\n\tdisplay: flex;\n\tflex-direction: column;\n`\n\nconst Left = styled.div`\n\twidth: ${MAX_DRAG_DISTANCE}px;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tposition: absolute;\n\tleft: -${MAX_DRAG_DISTANCE}px;\n\theight: 80px;\n`\n\nconst Right = styled(Left)`\n\tleft: auto;\n\tright: -${MAX_DRAG_DISTANCE}px;\n`\n\n\n\nexport default class SwipeActions extends React.Component<Props, State> {\n\tstate = {\n\t\tswiping: false,\n\t\tx: 0\n\t}\n\n\thandlePan = (e: HammerInput) => {\n\t\tconst dragDistance = e.deltaX < 0 ? Math.max(e.deltaX, -MAX_DRAG_DISTANCE) : Math.min(e.deltaX, MAX_DRAG_DISTANCE)\n\t\tthis.setState({ x: dragDistance , swiping: true })\n\t}\n\n\thandlePanEnd = (e: HammerInput) => {\n\t\tif (this.state.x < -MIN_DISTANCE_FOR_ACTION) {\n\t\t\tthis.props.onRightAction()\n\t\t}\n\t\tif (this.state.x > MIN_DISTANCE_FOR_ACTION) {\n\t\t\tthis.props.onLeftAction()\n\t\t}\n\t\tthis.setState({ x: 0, swiping: false })\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Hammer onPan={this.handlePan} onPanEnd={this.handlePanEnd} onTap={this.props.onRightAction}>\n\t\t\t\t<Container style={{ left: this.state.x + 'px' }} swiping={this.state.swiping}>\n\t\t\t\t\t<Left>\n\t\t\t\t\t\tUndo\n\t\t\t\t\t</Left>\n\t\t\t\t\t{this.props.children}\n\t\t\t\t\t<Right>\n\t\t\t\t\t\tTake\n\t\t\t\t\t</Right>\n\t\t\t\t</Container>\n\t\t\t</Hammer>\n\t\t)\n\t}\n}","import * as React from 'react';\nimport { MountainStrip, Goods } from \"./types\";\nimport styled from \"styled-components\";\nimport SwipeActions from './SwipeActions';\n\ninterface Props {\n\tstrip: MountainStrip,\n\tonTakeAction: () => void,\n\tonUndoAction: () => void\n};\n\nfunction goodToImageSrc(good: Goods): string {\n\tswitch(good) {\n\t\tcase Goods.Wood:\n\t\t\treturn '/wood.png'\n\t\tcase Goods.Stone:\n\t\t\treturn '/stone.png'\n\t\tcase Goods.Ore:\n\t\t\treturn '/ore.png'\n\t\tcase Goods.DoubleSilver:\n\t\t\treturn '/silvers.png'\n\t\tcase Goods.Silver:\n\t\t\treturn '/silver.png'\n\t}\n}\n\nconst Strip = styled.div`\n\t/* margin-bottom: 15px; */\n\theight: ${(props: { removed: boolean }) => props.removed ? '0px' : '80px'};\n\tbackground: url('/strip.png');\n\tbackground-size: fixed;\n\tdisplay: flex;\n\twidth: 100%;\n\talign-items: center;\n\tjustify-content: center;\n\ttransition: all 1s;\n\n\t${(props: { removed: boolean }) => props.removed && `\n\t\timg {\n\t\t\topacity: 0;\n\t\t}\n\t`};\n\n`\n\nconst Good = styled.img`\n\topacity: ${(props: { taken: boolean }) => props.taken ? '0.3' : '1'};\n\ttransition: all 0.8s;\n`\n\nexport default function MountainStripComponent(props: Props) {\n\treturn (\n\t\t<SwipeActions onLeftAction={props.onUndoAction} onRightAction={props.onTakeAction}>\n\t\t\t<Strip removed={props.strip.removed}>\n\t\t\t\t{props.strip.layout.map((good, index) => (\n\t\t\t\t\t<Good key={index} src={goodToImageSrc(good)} taken={props.strip.taken > index} />\n\t\t\t\t))}\n\t\t\t</Strip>\n\t\t</SwipeActions>\n\t)\n}","import { MountainStrip, Goods } from \"./types\";\n\nfunction shuffle<T>(array: T[]): T[] {\n\tlet currentIndex = array.length, temporaryValue, randomIndex;\n\n\t// While there remain elements to shuffle...\n\twhile (0 !== currentIndex) {\n\n\t\t// Pick a remaining element...\n\t\trandomIndex = Math.floor(Math.random() * currentIndex);\n\t\tcurrentIndex -= 1;\n\n\t\t// And swap it with the current element.\n\t\ttemporaryValue = array[currentIndex];\n\t\tarray[currentIndex] = array[randomIndex];\n\t\tarray[randomIndex] = temporaryValue;\n\t}\n\n\treturn array;\n}\n\nconst layouts = [\n\t[Goods.Wood, Goods.Wood, Goods.Wood, Goods.Stone, Goods.Ore, Goods.Ore, Goods.DoubleSilver],\n\t[Goods.Wood, Goods.Wood, Goods.Stone, Goods.Stone, Goods.Stone, Goods.Ore, Goods.DoubleSilver],\n\t[Goods.Wood, Goods.Wood, Goods.Wood, Goods.Wood, Goods.Stone, Goods.Ore, Goods.DoubleSilver],\n\t[Goods.Wood, Goods.Wood, Goods.Wood, Goods.Wood, Goods.Stone, Goods.Stone, Goods.DoubleSilver],\n\t[Goods.Wood, Goods.Wood, Goods.Stone, Goods.Stone, Goods.Ore, Goods.Ore, Goods.DoubleSilver],\n\t[Goods.Wood, Goods.Wood, Goods.Wood, Goods.Stone, Goods.Stone, Goods.Stone, Goods.DoubleSilver],\n\t[Goods.Wood, Goods.Wood, Goods.Wood, Goods.Stone, Goods.Stone, Goods.Ore, Goods.DoubleSilver],\n\t[Goods.Wood, Goods.Wood, Goods.Stone, Goods.Ore, Goods.Ore, Goods.DoubleSilver, Goods.DoubleSilver]\n]\n\nexport default function createStripDeck(): MountainStrip[] {\n\treturn shuffle(layouts.map(layout => ({\n\t\tlayout,\n\t\ttaken: 0,\n\t\tremoved: false\n\t})))\n}","import * as React from 'react';\nimport './App.css';\nimport { MountainStrip } from './types';\nimport MountainStripComponent from './MountainStrip';\nimport createStripDeck from './createStripDeck';\nimport styled from 'styled-components';\n\ninterface State {\n\tstripDeck: MountainStrip[],\n\tactiveStrips: MountainStrip[]\n}\n\nconst Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\toverflow-x: hidden;\n`\n\nconst Button = styled.button`\n\tdisplay: flex;\n\tmargin: 15px;\n\tpadding: 15px;\n\ttext-align: center;\n\tbackground: green;\n\tcolor: white;\n`\n\nclass App extends React.Component<{}, State> {\n\tpublic state: State = {\n\t\tstripDeck: createStripDeck(),\n\t\tactiveStrips: []\n\t}\n\tprivate newGame = () => {\n\t\tconst stripDeck = createStripDeck();\n\t\tconst [strip1, strip2, ...rest] = stripDeck\n\t\tthis.setState({\n\t\t\tactiveStrips: [strip1, strip2],\n\t\t\tstripDeck: rest\n\t\t})\n\t}\n\ttake = (index: number) => {\n\t\tconst newTakenNumber = Math.min(this.state.activeStrips[index].layout.length, this.state.activeStrips[index].taken + 1)\n\t\tthis.setState({\n\t\t\tactiveStrips: [\n\t\t\t\t...this.state.activeStrips.slice(0, index),\n\t\t\t\t{\n\t\t\t\t\tlayout: this.state.activeStrips[index].layout,\n\t\t\t\t\ttaken: newTakenNumber,\n\t\t\t\t\tremoved: this.state.activeStrips[index].removed\n\t\t\t\t},\n\t\t\t\t...this.state.activeStrips.slice(index + 1)\n\t\t\t]\n\t\t})\n\t}\n\tundo = (index: number) => {\n\t\tconst newTakenNumber = Math.max(0, this.state.activeStrips[index].taken - 1)\n\t\tthis.setState({\n\t\t\tactiveStrips: [\n\t\t\t\t...this.state.activeStrips.slice(0, index),\n\t\t\t\t{\n\t\t\t\t\tlayout: this.state.activeStrips[index].layout,\n\t\t\t\t\ttaken: newTakenNumber,\n\t\t\t\t\tremoved: this.state.activeStrips[index].removed\n\t\t\t\t},\n\t\t\t\t...this.state.activeStrips.slice(index + 1)\n\t\t\t]\n\t\t})\n\t}\n\tnextTurn = () => {\n\t\tconst newStrip = this.state.stripDeck[0]\n\t\tconst updatedStrips = this.state.activeStrips.map(strip => ({\n\t\t\tlayout: strip.layout,\n\t\t\ttaken: Math.min(strip.taken + 1, strip.layout.length),\n\t\t\tremoved: Math.min(strip.taken + 1, strip.layout.length) === strip.layout.length\n\t\t}))\n\t\tthis.setState({\n\t\t\tactiveStrips: newStrip ? updatedStrips.concat(newStrip) : updatedStrips,\n\t\t\tstripDeck: this.state.stripDeck.slice(1)\n\t\t})\n\t}\n\tcomponentDidUpdate() {\n\t\twindow.localStorage.setItem('state', JSON.stringify(this.state))\n\t}\n\tcomponentDidMount() {\n\t\tconst prevState = window.localStorage.getItem('state');\n\t\tif (prevState) {\n\t\t\ttry {\n\t\t\t\tconst state = JSON.parse(prevState);\n\t\t\t\tthis.setState(state);\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(err)\n\t\t\t}\n\t\t}\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t{this.state.activeStrips.map((strip, index) => (\n\t\t\t\t\t<MountainStripComponent\n\t\t\t\t\t\tkey={strip.layout.join('')}\n\t\t\t\t\t\tstrip={strip}\n\t\t\t\t\t\tonTakeAction={() => this.take(index)}\n\t\t\t\t\t\tonUndoAction={() => this.undo(index)}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t\t<Button onClick={this.nextTurn}>End of Turn</Button>\n\t\t\t\t<Button onClick={this.newGame}>New Game</Button>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}